题材 （魔王发现怪物太闲 已经打不过人类了）
玩家主体： 魔王怪物
对立面： 一切

* 通过特性 特殊技能 降低高低阶兵种的差距
* 每个兵种升级 1-10级
* 双属性 第一属性 攻击类型/护甲类型（DND） 第二属性 属性攻击
	攻击类型+属性
		近战攻击： 利刃，钝器
		远程攻击： 物理，魔法
	护甲类型
		无甲，轻甲，重甲，加强型
		属性类别
* 基础属性：
	攻，防，速，智（战前判定，技能触发）
* 特性（影响基础属性）
	好战 +攻
	狡诈 +智
	灵活 +速
	笨重 +防 -速
	……
* 特殊技能
	鼓舞 开场5秒 友方+速度
	隐形 必定先手
	……

* 兵种获取
	按5星划分
	1-3 培养皿 15分钟（70 1 20 2 10 3） 1小时 4小时(50 30 20)
	献祭合成
	2-5 多数合成
	隐藏固定获取方式

攻击附魔：攻击时附加额外的效果
火焰，额外附加一定百分比攻击
冰霜，减速
雷电，感电（友军物理攻击时造成额外伤害）
自然，hot方式治愈友军，提供攻防外的小额加成
神圣，直接治疗，并提供小额攻防加成
诅咒，攻击同时降低攻防
毒， 攻击并持续伤害

兵种基础标准属性
id 唯一标示
icon 图片id
name 名称
star 星级
atk 攻击力
def 防御力
spd 速度，决定攻击间隔
int 智力，影响法术释放几率,法术持续时间等
agi 敏捷，影响暴击率
dex 灵活，影响闪避
att_type 攻击类型
def_type 防御类型
hp 生命值
xxx_add 各属性的成长值
新增 攻击范围，移动速度

兵种个性化属性
id 标准化的唯一id
skills [技能1,技能2...] （联系到技能表）
talents [天赋1,天赋2...]] （联系到天赋表）
exp 当前经验值 （联系到经验等级表）

兵种战斗时的属性状态按先后顺序依次进行结算得到最终结果
1 根据特性调整基础属性
2 结算被动技能提供的直接属性
3 结算buff的属性
4 结算debuff的属性

enchant 附魔不再作为基础属性，所有属性均作为被动属性，按buff来进行操作

召唤规则：
分为培养召唤和献祭召唤
培养召唤可得1-3星怪物
培养召唤分为10分钟，30分钟，2小时，6小时，12小时 5档
	怪物数量	1星概率	2星开率	3星概率
10分钟	1	70%	20%	10%
30分钟	1	55%	30%	15%
2小时	2	45%	40%	25%	其中一个必为2星及以上70%/30%
6小时	3	35%	35%	30%	其中一个必为2星及以上60%/40%
12小时	3	20%	45%	35%	其中一个必为2星及以上40%/60%

献祭召唤可得2-5星怪物
*特别的某些具体怪物需要特定条件及公式得到
可选择献祭召唤1-5个怪，最终得到一个合成后的怪
献祭目的在于
* 消耗无用的低星怪物
* 通过献祭获得较有用天赋技能的高级怪物
情况1：
	全3星及以下的献祭合成（视为消耗低星模式）
		根据总星数来得到各级别出产的比例
		总星数		2星		3星		4星		5星		备注
		1-5			65%		33%		2%		0%		全1星，忽略
		5-8			55%		41%		4%		0%		至少3个2星
		8-10		45%		49%		6%		0%		2星3星或绝大多数2星
		10-12		35%		55%		8%		2%		33222
		12-14		25%		61%		10%		4%		33222以上
		15			15%		55%		24%		6%		全3
情况2：
	有4星及5星参与的合成（视为调整属性模式）
		产出结果基本不会低于本身
		4星怪个数	5星怪个数	2星		3星		4星		5星
		1			0			0%		15%		75%		10%
		2			0			0%		12%		70%		18%
		3			0			0%		8%		65%		27%
		0			1			0%		0%		30%		70%
		0			2			0%		0%		20%		80%
		0			3			0%		0%		15%		85%
情况3：
	真正高级合成，至少4个高星怪物（4-5）
	4星 12%	5星	88%
*具有相同天赋特性的怪进行合成时，根据数量决定产出是否会继承该天赋
天赋	有2个或以上带同一天赋
	相同天赋数	继承概率
	2			60%
	3			75%
	4			90%
	5			95%
	
关于天赋及技能
技能跟单个怪有关，每个怪习得的技能各不相同，主动向，天生自带
天赋与单个怪无关（也有特殊天赋，特殊天赋无法继承），被动向，随机得到

怪物等级最大值为10级，3,5,8,10级时，都有一定几率领悟一次天赋
怪物星级	技能最大数	天赋最大数
1			1			1
2			1			2
3			2			2
4			2			3
5			3			5


战斗规则设计
战斗可能分为普通战斗，boss站，攻城战等多种类型
暂时只考虑普通战斗

布阵场地为3*3布阵
战斗场地为横幅长条形30*9，玩家从左侧向右，敌人从右向左
怪物按阵型出场 向前行进 寻找攻击范围内距离最近的目标进行攻击 直至一方怪物死完

程序相关设计：
怪物状态：移动/攻击
移动：怪物攻击范围内不存在地方怪物时，怪物自动寻找距离自己最近的目标，以此为目标点移动
攻击：有敌方怪物处于自身攻击范围内时，按照攻击速度进行攻击

为了防止怪物扎堆的情况，将一个怪周围的位置分为8块，索敌时自动查找最近空闲位置进行移动
怪物AI的基本流程为：
判断攻击范围内是否存在有效目标
存在有效目标，则进行攻击（有多个目标时，以上次的目标优先，否则攻击能使攻击最大化的目标），不存在有效目标，则进行索敌
遍历所有有效目标位置，找到距离最近的一个
查找目标周围空闲攻击点，以此为目标进行移动
*每次攻击时，判断目标是否仍处于攻击范围内
*攻击间隔累计，即如果3秒攻击1次，在累计到2秒时，目标死亡，那么下次攻击时，只需要1秒准备时间
*魔法视为特殊攻击，攻击前先判定魔法释放，如果释放魔法，则不再进行普通攻击

战斗中的怪物模型
怪物坐标(x,y)
怪物icon
怪物血量
怪物攻击类型
怪物攻击力
怪物防御类型
怪物防御力
怪物拥有的技能
怪物拥有的天赋
怪物智力
怪物灵活
怪物敏捷
怪物移动速度
怪物攻击速度
怪物攻击范围
怪物周围空闲位置（常态为8方位，特殊的大体积boss类可能会有更大的范围）

战斗中包括
地图，记录当前地图上所有怪物位置
统计，用于战后一些展示

基于网格的战斗逻辑设定
怪物的位置始终基于网格
战斗中的怪物拥有几个坐标
*自身坐标，表示怪物处于的坐标位置（例如一个AOE技能砸下，如果怪物正处于A点向B点移动过程中，怪物坐标仍位于A内，则仍会受到伤害）
*目标坐标，表示怪物移动目标的坐标，该坐标必定与怪物自身位置相邻，用于其他怪物进行寻路时基准（怪物从A移动到B，目标B点，其他怪物寻路时以B点基准进行寻路）
怪物允许斜方向进行移动
出现等待时（移动速度快的怪物先移动到了目标点），先移动到点的怪物进入攻击准备阶段，累计攻击时间，从而在敌人到达目标点时，获得先手

由于牵涉到跳过游戏和战斗回放的情况
战斗逻辑与游戏画面逻辑应当进行区分，战斗逻辑独立运行，生成完整战报，画面显示再根据战报进行相应的显示
根据上面的思考
在战斗过程中，需要记录每一个动作及执行的对象，执行的时间
根据时间排序成数组，最终形成战报
(时间，对象，动作，结果)
出生
移动(目标点) 
攻击(目标，造成伤害，是否暴击)
释放技能(目标，伤害)
获得buff
失去buff
死亡

游戏的表现形式变换
不以手游风的菜单型UI，而改成农场要塞的经营类画面
添加剧情故事的推动，设立类似8大道馆之类的挑战目标
添加怪物生涯统计，人物生涯统计等

战斗思路
1 生成网格地图，初始化网格地图，地图数据记录
2 初始化怪物数据，放入地图